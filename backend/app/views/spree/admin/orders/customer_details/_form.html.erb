<fieldset data-hook="admin_customer_detail_form_fields" class="no-border-top">

  <div data-hook="customer_fields" class="row">
    <div class="alpha twelve columns">
      <div class="field">
        <%= f.label :email, Spree.t(:email) %>
        <%= f.email_field :email, :class => 'fullwidth' %>
      </div>
    </div>
    <%= f.hidden_field :user_id %>
  </div>

  <div data-hook="bill_address_wrapper" class="alpha six columns">
    <fieldset class="no-border-bottom">
      <legend align="center"><%= Spree.t(:billing_address) %></legend>
      <%= f.fields_for :bill_address do |ba_form| %>
        <%= render :partial => 'spree/admin/shared/address_form', :locals => { :f => ba_form, :type => "billing" } %>
      <% end %>
    </fieldset>
  </div>

  <div class="omega six columns" data-hook="ship_address_wrapper">
    <fieldset class="no-border-bottom">
      <legend align="center"><%= Spree.t(:shipping_address) %></legend>
      <%= f.fields_for :ship_address do |sa_form| %>
        <div class="field" style="position: absolute;margin-top: -15px;right: 0;">
          <span data-hook="use_billing">
            <%= check_box_tag 'order[use_billing]', '1', (!(@order.bill_address.empty? && @order.ship_address.empty?) && @order.bill_address.same_as?(@order.ship_address)) %>
            <%= label_tag 'order[use_billing]', Spree.t(:use_billing_address) %>
          </span>
        </div>

        <%= render :partial => 'spree/admin/shared/address_form', :locals => { :f => sa_form, :type => 'shipping' } %>
      <% end %>
    </fieldset>
  </div>

  <div class="clear"></div>

  <div class="form-buttons filter-actions actions" data-hook="buttons">
    <%= button Spree.t('actions.update'), 'refresh' %>
  </div>

  <% content_for :head do %>
    <%= javascript_include_tag 'spree/backend/address_states.js' %>
  <% end %>
</fieldset>
